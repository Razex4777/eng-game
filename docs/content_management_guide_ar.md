# ุฏููู ุฅุฏุงุฑุฉ ุงููุญุชูู - KHTMTHA Game

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ูุดุฑุญ ููููุฉ ุฅุถุงูุฉ ุฃุณุฆูุฉ ุฌุฏูุฏุฉ ูุฅุฏุงุฑุฉ ุงููุฑุงุญู ูุงูููุงุฏ ูู ูุนุจุฉ KHTMTHA.

---

## ๐บ๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```mermaid
graph TD
    A[ุงูููุงุฏ<br/>subjects] -->|ุชุญุชูู ุนูู| B[ุงููุฆุงุช<br/>categories]
    B -->|ุชุญุชูู ุนูู| C[ุงููุฑุงุญู<br/>stages]
    C -->|ุชุญุชูู ุนูู| D[ุงูุฃุณุฆูุฉ<br/>questions]
    
    E[ุงููุณุชุฎุฏููู<br/>users] -->|ูุณุฌููู ุชูุฏููู| F[user_progress]
    D -->|ูุชู ุชุชุจุน| G[ุงูุฅุฌุงุจุงุช ุงูุฎุงุทุฆุฉ<br/>wrong_answers]
```

### ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู:

| ุงูุฌุฏูู | ุงูุงุฑุชุจุงุท | ุงููุตู |
|--------|---------|-------|
| **subjects** | ุฌุฐุฑ | ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ (ุฃุญูุงุกุ ุฅูุฌููุฒู) |
| **categories** | subject_id โ subjects.id | ุฃููุงุน ุงููุฑุงุฌุนุฉ (ูุตููุ ูุตู ุณูุฉุ ุณูุฉ ูุงููุฉ) |
| **stages** | category_id โ categories.id | ุงููุฑุงุญู/ุงูุฃุฌุฒุงุก ุฏุงุฎู ูู ูุฆุฉ |
| **questions** | stage_id โ stages.id | ุงูุฃุณุฆูุฉ ูู ูู ูุฑุญูุฉ |

---

## ๐ ุฅุถุงูุฉ ูุงุฏุฉ ุฌุฏูุฏุฉ

### ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ ุงููุงุฏุฉ ูู ุฌุฏูู subjects

```sql
INSERT INTO subjects (name, name_ar, order_index)
VALUES ('Chemistry', 'ุงูููููุงุก', 3);
```

| ุงูุนููุฏ | ุงููุตู | ูุซุงู |
|--------|-------|------|
| name | ุงุณู ุงููุงุฏุฉ ุจุงูุฅูุฌููุฒูุฉ | 'Chemistry' |
| name_ar | ุงุณู ุงููุงุฏุฉ ุจุงูุนุฑุจูุฉ | 'ุงูููููุงุก' |
| order_index | ุชุฑุชูุจ ุงูุธููุฑ | 3 |

---

## ๐ ุฅุถุงูุฉ ูุฆุฉ ุฌุฏูุฏุฉ

### ุงูุฎุทูุฉ 2: ุฅุถุงูุฉ ุงููุฆุฉ ูู ุฌุฏูู categories

```sql
INSERT INTO categories (subject_id, name, name_ar, order_index)
VALUES (
    (SELECT id FROM subjects WHERE name = 'Chemistry'),
    'Chapters_Review',
    'ูุฑุงุฌุนุฉ ุงููุตูู',
    1
);
```

| ุงูุนููุฏ | ุงููุตู | ุงูููู ุงููุณููุญุฉ |
|--------|-------|----------------|
| name | ููุน ุงููุฑุงุฌุนุฉ | Chapters_Review, FullYear, HalfYear |
| name_ar | ุงูุงุณู ุจุงูุนุฑุจูุฉ | ุฃู ูุต |

---

## ๐ฏ ุฅุถุงูุฉ ูุฑุญูุฉ ุฌุฏูุฏุฉ

### ุงูุฎุทูุฉ 3: ุฅุถุงูุฉ ุงููุฑุญูุฉ ูู ุฌุฏูู stages

```sql
INSERT INTO stages (category_id, name, name_ar, chapter_no, part_no, order_index)
VALUES (
    (SELECT id FROM categories WHERE name = 'Chapters_Review' AND subject_id = 3),
    'Chemistry_Ch1_Part1',
    'ุงูุฌุฒุก 1 - ุงููุตู 1',
    1,
    1,
    11
);
```

| ุงูุนููุฏ | ุงููุตู | ูุซุงู |
|--------|-------|------|
| name | ุงุณู ุงูููู ุงูุฃุตูู | 'Chemistry_Ch1_Part1' |
| name_ar | ุงูุงุณู ุงููุนุฑูุถ | 'ุงูุฌุฒุก 1 - ุงููุตู 1' |
| chapter_no | ุฑูู ุงููุตู | 1, 2, 3... |
| part_no | ุฑูู ุงูุฌุฒุก | 1, 2, 3... |
| order_index | ุชุฑุชูุจ ุงููุฑุฒ | 11, 12, 13... |

---

## โ ุฅุถุงูุฉ ุฃุณุฆูุฉ

### ุงูุฎุทูุฉ 4: ุฅุถุงูุฉ ุงูุฃุณุฆูุฉ ูู ุฌุฏูู questions

```sql
INSERT INTO questions (
    stage_id, 
    question_no, 
    question_text, 
    question_type,
    option_a, 
    option_b, 
    option_c, 
    option_d, 
    correct_answer
) VALUES 
(
    91,  -- ูุนุฑู ุงููุฑุญูุฉ
    1,   -- ุฑูู ุงูุณุคุงู
    'ุงูุนูุตุฑ ุงูููููุงุฆู ูุชููู ููุ',
    'ุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ',
    'ุฐุฑุงุช',
    'ุฌุฒูุฆุงุช',
    'ุฅููุชุฑููุงุช',
    'ููุงุฉ',
    'ุฐุฑุงุช'
);
```

### ูููู ุฌุฏูู questions:

| ุงูุนููุฏ | ุงูููุน | ูุทููุจ | ูุตู |
|--------|-------|-------|-----|
| id | uuid | ุชููุงุฆู | ูุนุฑู ูุฑูุฏ |
| stage_id | uuid | ูุนู | ูุฑุชุจุท ุจุฌุฏูู stages |
| question_no | int | ูุนู | ุฑูู ุงูุณุคุงู ูู ุงููุฑุญูุฉ |
| question_text | text | ูุนู | ูุต ุงูุณุคุงู |
| question_type | text | ูุง | ููุน ุงูุณุคุงู |
| option_a | text | ูุนู | ุงูุฎูุงุฑ ุฃ |
| option_b | text | ูุนู | ุงูุฎูุงุฑ ุจ |
| option_c | text | ูุง | ุงูุฎูุงุฑ ุฌ |
| option_d | text | ูุง | ุงูุฎูุงุฑ ุฏ |
| correct_answer | text | ูุนู | ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ |

---

## ๐ ุนุฏุฏ ุงูุฎูุงุฑุงุช

### ููู ูุญุฏุฏ ุงููุนุจุฉ ุนุฏุฏ ุงูุฎูุงุฑุงุชุ

ุงููุนุจุฉ **ุชููุงุฆูุฉ** ูู ูุฑุงุกุฉ ุนุฏุฏ ุงูุฎูุงุฑุงุช:

| ุฅุฐุง ูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช | ุงููุนุจุฉ ุชุนุฑุถ |
|---------------------------|-------------|
| option_a + option_b ููุท | ุฎูุงุฑุงู (ุฃุ ุจ) |
| option_a + option_b + option_c | ุซูุงุซุฉ ุฎูุงุฑุงุช (ุฃุ ุจุ ุฌ) |
| option_a + option_b + option_c + option_d | ุฃุฑุจุนุฉ ุฎูุงุฑุงุช (ุฃุ ุจุ ุฌุ ุฏ) |

### ูุซุงู ุนูู ุซูุงุซุฉ ุฎูุงุฑุงุช:
```sql
-- ุณุคุงู ุฅูุฌููุฒู (3 ุฎูุงุฑุงุช)
option_a: 'are'
option_b: 'is'
option_c: 'am'
option_d: NULL  -- ุฃู ูุงุฑุบ
```

### ูุซุงู ุนูู ุฃุฑุจุนุฉ ุฎูุงุฑุงุช:
```sql
-- ุณุคุงู ุฃุญูุงุก (4 ุฎูุงุฑุงุช)
option_a: 'ุงูุฏูุชููุณูู'
option_b: 'ุงูููุชููููุฏุฑูุง'
option_c: 'ุงูููุณูุณูู'
option_d: 'ุงูุจูุฑููุณูุณูู'
```

---

## ๐ ุงุณุชูุฑุงุฏ ูู Excel

### ูููู ููู Excel ุงููุทููุจ:

| ุงูุนููุฏ | A | B | C | D | E | F | G |
|--------|---|---|---|---|---|---|---|
| **ุงูุตู 1** | ุฑูู ุงูุณุคุงู | ูุต ุงูุณุคุงู | ุงูููุน | ุฎูุงุฑ ุฃ | ุฎูุงุฑ ุจ | ุฎูุงุฑ ุฌ | ุฎูุงุฑ ุฏ |
| **ุงูุตู 2** | 1 | ุงูุณุคุงู ุงูุฃูู... | ุงุฎุชูุงุฑ | ุฅุฌุงุจุฉ ุฃ | ุฅุฌุงุจุฉ ุจ | ุฅุฌุงุจุฉ ุฌ | ุฅุฌุงุจุฉ ุฏ |
| **ุงูุตู 3** | 2 | ุงูุณุคุงู ุงูุซุงูู... | ุงุฎุชูุงุฑ | ุฅุฌุงุจุฉ ุฃ | ุฅุฌุงุจุฉ ุจ | ุฅุฌุงุจุฉ ุฌ | ุฅุฌุงุจุฉ ุฏ |

### ุชุณููุฉ ุงููููุงุช:

```
All files excel/
โโโ Chemistry/
โ   โโโ Chapters_Review/
โ   โ   โโโ Chemistry_Ch1_Part1_Review.xlsx
โ   โ   โโโ Chemistry_Ch1_Part2_Review.xlsx
โ   โ   โโโ Chemistry_Ch1_Part3_Review.xlsx
โ   โโโ FullYear/
โ   โ   โโโ Chemistry_FullYear_Part01.xlsx
โ   โโโ HalfYear/
โ       โโโ Chemistry_HalfYear_Part01.xlsx
```

### ุชุดุบูู ุงูุงุณุชูุฑุงุฏ:

```bash
cd scripts
node import-excel.js
```

---

## ๐ ูุธุงู ููู ุงููุฑุงุญู

### ููู ูุนููุ

```mermaid
graph LR
    A[ุงููุฑุญูุฉ 1] -->|ุงูุชููุช| B[ุงููุฑุญูุฉ 2]
    B -->|ุงูุชููุช| C[ุงููุฑุญูุฉ 3]
    C -->|ุงูุชููุช| D[ุงููุฑุญูุฉ 4]
```

### ุฃููุงุน ุงูููู:

| ููุน ุงููุฆุฉ | ููุทู ุงูููู |
|-----------|-----------|
| **Chapters_Review** | ูู ุฌุฒุก ูู ููุณ ุงููุตู ููุชุญ ุจุนุฏ ุฅููุงู ุงูุฌุฒุก ุงูุณุงุจู |
| **FullYear** | ูุฑุญูุฉ ุชุฑุงููู - ูู ูุฑุญูุฉ ุชูุชุญ ุจุนุฏ ุฅููุงู ุงูุณุงุจูุฉ |
| **HalfYear** | ูุฑุญูุฉ ุชุฑุงููู - ูู ูุฑุญูุฉ ุชูุชุญ ุจุนุฏ ุฅููุงู ุงูุณุงุจูุฉ |

### ุฌุฏูู user_progress:

```sql
-- ุนูุฏ ุฅููุงู ูุฑุญูุฉุ ูุชู ุฅูุดุงุก ุณุฌู ููุง
INSERT INTO user_progress (
    user_id,
    stage_id,
    completed,
    stars,
    best_score,
    completed_at
) VALUES (
    'uuid-ุงููุณุชุฎุฏู',
    91,
    true,
    3,  -- ุนุฏุฏ ุงููุฌูู (1-3)
    1500,
    NOW()
);
```

---

## โญ ูุธุงู ุงููุฌูู

### ุญุณุงุจ ุงููุฌูู ุจูุงุกู ุนูู ุงูุฏูุฉ:

| ุงูุฏูุฉ | ุงููุฌูู |
|-------|--------|
| 90% ุฃู ุฃูุซุฑ | โญโญโญ 3 ูุฌูู |
| 70% - 89% | โญโญ 2 ูุฌูู |
| 50% - 69% | โญ 1 ูุฌูุฉ |
| ุฃูู ูู 50% | 0 ูุฌูู |

### ุญุณุงุจ ุงูุฏูุฉ:
```
ุงูุฏูุฉ = (ุนุฏุฏ ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ / ุฅุฌูุงูู ุงูุฃุณุฆูุฉ) ร 100
```

---

## ๐๏ธ ูุตุงุฆุญ ูููุฉ

### 1. ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ
- ูุฌุจ ุฃู ุชุชุทุงุจู `correct_answer` ูุน ุฃุญุฏ ุงูุฎูุงุฑุงุช (A, B, C, ุฃู D)
- ูุซุงู: ุฅุฐุง ูุงู ุงูุฎูุงุฑ ุฃ = "ุงููุงูุฑุฉ"ุ ููุฌุจ ุฃู ุชููู correct_answer = "ุงููุงูุฑุฉ"

### 2. ุชุฑุชูุจ ุงููุฑุฒ (order_index)
- Chapters_Review: ุงุณุชุฎุฏู `(chapter_no ร 10) + part_no`
  - ุงููุตู 1 ุงูุฌุฒุก 1 = 11
  - ุงููุตู 1 ุงูุฌุฒุก 2 = 12
  - ุงููุตู 2 ุงูุฌุฒุก 1 = 21

- FullYear/HalfYear: ุงุณุชุฎุฏู ุฑูู ุงูุฌุฒุก ููุท
  - ุงูุฌุฒุก 1 = 1
  - ุงูุฌุฒุก 2 = 2

### 3. ุงูุฃูุงู (RLS)
- ุฌููุน ุงูุฌุฏุงูู ููุนู ูููุง Row Level Security
- ุงููุณุชุฎุฏููู ูููููู ูุฑุงุกุฉ ุงูุฃุณุฆูุฉ ููุท
- ุงูุชุนุฏูู ูููู ูู ุฎูุงู Supabase Dashboard ููุท

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงูุญุงููุฉ

| ุงููุงุฏุฉ | ุงููุฑุงุญู | ุงูุฃุณุฆูุฉ |
|--------|---------|---------|
| ุงูุฃุญูุงุก | 30 | 645 |
| ุงูุฅูุฌููุฒู | 60 | 1,438 |
| **ุงูุฅุฌูุงูู** | **90** | **2,083** |

---

## ๐ ุงูุฏุนู ุงูููู

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงูู ูู ุฅุถุงูุฉ ุงููุญุชูู:

1. ุงูุชุญ Supabase Dashboard
2. ุงูุชุธุฑ ุฅูู Table Editor
3. ุชุงุจุน ุงูุฌุฏูู ุงููุทููุจ ุชุนุฏููู
4. ุฃุถู ุฃู ุนุฏู ุงูุจูุงูุงุช ูุจุงุดุฑุฉ

**ููุงุญุธุฉ**: ุงูุชุบููุฑุงุช ุชุธูุฑ ูู ุงููุนุจุฉ ููุฑุงู ุจุนุฏ ุงูุชุญุฏูุซ (F5).
